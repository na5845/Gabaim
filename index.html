<!DOCTYPE html>
<html dir="rtl" lang="he">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>מעקב גיוס כספים</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        /* צבעים חודשיים - בורדו */
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #4a0e2e 0%, #6a1b3d 50%, #4a0e2e 100%);
            color: white;
            padding: 20px;
            min-height: 100vh;
            transition: background 0.5s ease;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: rgba(106, 27, 61, 0.3);
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.4);
            transition: background 0.5s ease;
        }

        /* צבעים שנתיים - חום עמוק */
        body.annual-mode {
            background: linear-gradient(135deg, #3c2415 0%, #654321 50%, #3c2415 100%);
        }

        .annual-mode .container {
            background: rgba(101, 67, 33, 0.3);
        }

        .annual-mode .main-progress {
            background: #654321;
        }

        .annual-mode .group-progress {
            background: #654321;
        }

        .header {
            display: none;
        }

        .top-row {
            display: flex;
            justify-content: space-between;
            gap: 40px;
            margin-bottom: 20px;
        }

        .top-row .title-box {
            flex: 1;
            margin-left: 0;
        }

        .top-row .left-section {
            flex: 0 0 auto;
        }

        .title-box {
            background: rgba(255, 255, 255, 0.08);
            border-radius: 15px;
            padding: 15px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 215, 0, 0.3);
            text-align: center;
            flex: 1;
            width: 100%;
        }

        .title-content {
            display: flex;
            align-items: flex-start;
            justify-content: space-between;
            margin-bottom: 35px;
            padding-bottom: 0px;
            border-bottom: 1px solid rgba(255, 215, 0, 0.2);
        }

        .title-and-toggle {
            text-align: center;
            flex: 1;
        }

        .logo {
            width: 150px;
            height: auto;
        }

        .title-box .title {
            font-size: 1.8em;
            margin-top: 15px;
            margin-bottom: 25px;
            text-align: center;
            background: linear-gradient(45deg, #FFD700, #FFA500);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .content-row {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 50px;
        }

        .content-box {
            background: rgba(255, 255, 255, 0.08);
            border-radius: 15px;
            padding: 12px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 215, 0, 0.3);
        }

        .left-section {
            flex: 0 0 auto;
            text-align: center;
        }

        .left-section .content-box {
            display: inline-block;
            width: auto;
        }

        .right-section {
            width: 400px;
            text-align: center;
        }

        .gabbaim-section {
            text-align: center;
            margin-top: 20px;
        }

        .gabbaim-section .content-box {
            display: inline-block;
            width: 100%;
            max-width: none;
        }

        .total-amount {
            font-size: 2.5em;
            font-weight: bold;
            color: #FFD700;
            margin-bottom: 10px;
        }

        .target-info {
            font-size: 1.2em;
            color: #ccc;
            margin-bottom: 20px;
        }

        .main-progress {
            background: #6a1b3d;
            border-radius: 25px;
            height: 50px;
            margin: 20px 0;
            overflow: hidden;
            position: relative;
            transition: background 0.5s ease;
        }

        .main-progress-bar {
            height: 100%;
            background: linear-gradient(90deg, #FFD700, #FFA500);
            border-radius: 25px;
            transition: width 0.5s ease;
            position: relative;
        }

        .main-progress-text {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-weight: bold;
            font-size: 1.1em;
            color: #000;
            z-index: 2;
        }

        .groups-container {
            display: flex;
            justify-content: center;
            gap: 8px;
            margin-top: 8px;
            align-items: flex-end;
            padding: 15px 0;
            flex-wrap: wrap;
        }

        .left-section .groups-container {
            justify-content: flex-start;
        }

        .left-section .section-title {
            text-align: center;
        }

        .group-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            width: 60px;
        }

        #gabbaim-container {
            justify-content: center;
        }

        #gabbaim-container .group-item {
            width: 35px;
        }

        #gabbaim-container .group-progress {
            width: 28px;
        }

        #gabbaim-container .group-name {
            font-size: 0.6em;
            height: 35px;
        }

        .group-name {
            font-size: 0.8em;
            margin-top: 8px;
            font-weight: bold;
            color: #FFD700;
            text-align: center;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            line-height: 1.2;
        }

        .group-progress {
            background: #6a1b3d;
            border-radius: 10px;
            width: 45px;
            height: 250px;
            position: relative;
            overflow: hidden;
            transition: background 0.5s ease;
        }

        .group-progress-bar {
            position: absolute;
            bottom: 0;
            width: 100%;
            border-radius: 10px;
            transition: height 0.5s ease;
        }

        .group-progress-bar.normal {
            background: linear-gradient(0deg, #FFD700, #FFA500);
        }

        .group-progress-bar.exceeded {
            background: linear-gradient(0deg, #FFD700 0%, #FFA500 100%, #32CD32 100%);
        }

        .progress-exceeded {
            position: absolute;
            bottom: 0;
            width: 100%;
            background: linear-gradient(0deg, #32CD32, #00FF00);
            border-radius: 10px;
            transition: height 0.5s ease;
        }

        .group-percentage {
            position: absolute;
            bottom: 10px;
            left: 50%;
            transform: translateX(-50%);
            font-weight: bold;
            font-size: 0.8em;
            color: #000;
            z-index: 2;
        }

        .group-amount {
            font-size: 0.8em;
            color: #ccc;
            margin-top: 5px;
            display: none;
        }

        .celebration {
            /* הסרתי את האנימציה */
        }

        .title {
            font-size: 2em;
            margin-bottom: 10px;
            text-align: center;
            background: linear-gradient(45deg, #FFD700, #FFA500);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .toggle-container {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            margin-bottom: 40px;
            padding-bottom: 25px;
            border-bottom: 1px solid rgba(255, 215, 0, 0.2);
        }

        .title-box .total-amount {
            margin-top: 20px;
        }

        .toggle-label {
            font-size: 1.2em;
            color: #FFD700;
            font-weight: bold;
        }

        .toggle-switch {
            position: relative;
            width: 120px;
            height: 40px;
            background: #6a1b3d;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid #FFD700;
        }

        .annual-mode .toggle-switch {
            background: #654321;
        }

        .toggle-slider {
            position: absolute;
            top: 3px;
            left: 3px;
            width: 56px;
            height: 30px;
            background: linear-gradient(45deg, #FFD700, #FFA500);
            border-radius: 15px;
            transition: transform 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8em;
            font-weight: bold;
            color: #4a0e2e;
        }

        .toggle-switch.annual .toggle-slider {
            transform: translateX(60px);
        }

        .toggle-text {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            font-size: 0.9em;
            font-weight: bold;
            color: #FFD700;
        }

        .toggle-text.left {
            left: 8px;
        }

        .toggle-text.right {
            right: 8px;
        }

        .toggle-switch.annual .toggle-text.left {
            color: rgba(255, 215, 0, 0.5);
        }

        .toggle-switch:not(.annual) .toggle-text.right {
            color: rgba(255, 215, 0, 0.5);
        }

        .section-title {
            font-size: 1.5em;
            margin: 0 0 15px 0;
            text-align: center;
            color: #FFD700;
            font-weight: bold;
            padding-bottom: 10px;
            border-bottom: 1px solid rgba(255, 215, 0, 0.2);
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="top-row">
            <div class="title-box">
                <div class="title-content">
                    <img src="https://raw.githubusercontent.com/na5845/E/main/logo.png" alt="לוגו" class="logo" style="width: 130px !important; height: 130px !important;">
                    <div class="title-and-toggle">
                        <h1 class="title">מעקב גיוס כספים</h1>
                        <div class="toggle-container" style="border-bottom: none !important; padding-bottom: 0 !important;">
                            <div class="toggle-switch" id="periodToggle" onclick="togglePeriod()">
                                <div class="toggle-text left">חודשי</div>
                                <div class="toggle-text right">שנתי</div>
                                <div class="toggle-slider" id="toggleSlider">חודשי</div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="total-amount" id="totalAmount">5,000 ש"ח</div>
                <div class="target-info">מתוך יעד של 8,000 ש"ח</div>
                
                <div class="main-progress">
                    <div class="main-progress-bar" id="mainProgressBar">
                        <div class="main-progress-fill" id="mainProgressFill">
                            <div class="main-progress-text" id="mainProgressText">0%</div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="left-section">
                <div class="content-box">
                    <div class="section-title">לפי שטיבלעך</div>
                    <div class="groups-container" id="shtiblech-container">
                        <!-- הקבוצות יתווספו כאן באמצעות JavaScript -->
                    </div>
                </div>
            </div>
        </div>

        <div class="bottom-row">
            <!-- התיבה הזו לא נדרשת יותר -->
        </div>

        <div class="gabbaim-section">
            <div class="content-box">
                <div class="section-title">לפי גבאים</div>
                <div class="groups-container" id="gabbaim-container">
                    <!-- הנציגים יתווספו כאן באמצעות JavaScript -->
                </div>
            </div>
        </div>
    </div>

    <script>
        // נתונים חודשיים
        const monthlyData = {
            totalTarget: 8000,
            groupTarget: 1000,
            totalRaised: 5000,
            groupAmounts: [750, 600, 650, 1200, 500, 700, 550, 450],
            representativeAmounts: [320, 280, 150, 380, 220, 190, 310, 170, 260, 340, 200, 240, 160, 290, 180, 230, 270, 140, 210, 250],
            repTarget: 250
        };

        // נתונים שנתיים
        const annualData = {
            totalTarget: 96000,
            groupTarget: 12000,
            totalRaised: 60000,
            groupAmounts: [9000, 7200, 7800, 14400, 6000, 8400, 6600, 5400],
            representativeAmounts: [3840, 3360, 1800, 4560, 2640, 2280, 3720, 2040, 3120, 4080, 2400, 2880, 1920, 3480, 2160, 2760, 3240, 1680, 2520, 3000],
            repTarget: 3000
        };

        let isAnnual = false;

        function togglePeriod() {
            const toggle = document.getElementById('periodToggle');
            const slider = document.getElementById('toggleSlider');
            const body = document.body;
            
            isAnnual = !isAnnual;
            
            if (isAnnual) {
                toggle.classList.add('annual');
                slider.textContent = 'שנתי';
                body.classList.add('annual-mode');
            } else {
                toggle.classList.remove('annual');
                slider.textContent = 'חודשי';
                body.classList.remove('annual-mode');
            }
            
            // עדכן את כל הנתונים
            updateMainProgress();
            updateGroups();
            updateRepresentatives();
        }

        function updateDataForAnnual() {
            console.log('עבר למצב שנתי');
        }

        function updateDataForMonthly() {
            console.log('עבר למצב חודשי');
        }

        // שמות הקבוצות
        const groupNames = [
            'בעלזא 5',
            'בן יעקב', 
            'זכרון רפאל',
            'בית פנחס',
            'שיכון ה\'',
            'בעזא 1',
            'רמת אלחנן',
            'שטיבל אברכים'
        ];

        // שמות הנציגים (20 נציגים)
        const representatives = [
            'אברהם כהן', 'יצחק לוי', 'יעקב מרדכי', 'משה דוד', 'אהרן יוסף',
            'שמואל חיים', 'דניאל אליעזר', 'נתן יהודה', 'רפאל מאיר', 'גבריאל שמעון',
            'עמנואל צבי', 'יחיאל ברוך', 'אלעזר נפתלי', 'בנימין אשר', 'זבולון גד',
            'יהושע ראובן', 'כלב שמשון', 'פנחס אליהו', 'אלקנה אברם', 'יונתן שלמה'
        ];

        function getCurrentData() {
            return isAnnual ? annualData : monthlyData;
        }

        function updateMainProgress() {
            const data = getCurrentData();
            const percentage = Math.round((data.totalRaised / data.totalTarget) * 100);
            const progressBar = document.getElementById('mainProgressBar');
            const progressText = document.getElementById('mainProgressText');
            const totalAmount = document.getElementById('totalAmount');
            const targetInfo = document.querySelector('.target-info');
            
            progressBar.style.width = `${Math.min(percentage, 100)}%`;
            progressText.textContent = `${percentage}%`;
            totalAmount.textContent = `${data.totalRaised.toLocaleString()} ש"ח`;
            targetInfo.textContent = `מתוך יעד של ${data.totalTarget.toLocaleString()} ש"ח`;
        }

        function updateGroups() {
            const container = document.getElementById('shtiblech-container');
            const data = getCurrentData();
            
            // נקה את התוכן הקיים
            container.innerHTML = '';
            
            groupNames.forEach((name, index) => {
                const amount = data.groupAmounts[index];
                const percentage = Math.round((amount / data.groupTarget) * 100);
                
                const groupDiv = document.createElement('div');
                groupDiv.className = 'group-item';
                
                let progressHTML = '';
                if (percentage > 100) {
                    const exceededPercentage = percentage - 100;
                    const exceededHeight = Math.min(exceededPercentage, 100);
                    
                    progressHTML = `
                        <div class="group-progress-bar normal" style="height: 100%"></div>
                        <div class="progress-exceeded" style="height: ${exceededHeight}%"></div>
                    `;
                } else {
                    progressHTML = `<div class="group-progress-bar normal" style="height: ${percentage}%"></div>`;
                }
                
                groupDiv.innerHTML = `
                    <div class="group-progress">
                        ${progressHTML}
                        <div class="group-percentage">${percentage}%</div>
                    </div>
                    <div class="group-name">${name}</div>
                `;
                
                container.appendChild(groupDiv);
            });
        }

        function updateRepresentatives() {
            const container = document.getElementById('gabbaim-container');
            const data = getCurrentData();
            
            // נקה את התוכן הקיים
            container.innerHTML = '';
            
            representatives.forEach((name, index) => {
                const amount = data.representativeAmounts[index];
                const percentage = Math.round((amount / data.repTarget) * 100);
                
                const repDiv = document.createElement('div');
                repDiv.className = 'group-item';
                
                let progressHTML = '';
                if (percentage > 100) {
                    const exceededPercentage = percentage - 100;
                    const exceededHeight = Math.min(exceededPercentage, 100);
                    
                    progressHTML = `
                        <div class="group-progress-bar normal" style="height: 100%"></div>
                        <div class="progress-exceeded" style="height: ${exceededHeight}%"></div>
                    `;
                } else {
                    progressHTML = `<div class="group-progress-bar normal" style="height: ${percentage}%"></div>`;
                }
                
                repDiv.innerHTML = `
                    <div class="group-progress">
                        ${progressHTML}
                        <div class="group-percentage" style="transform: translate(-50%, -50%) rotate(-90deg);">${percentage}%</div>
                    </div>
                    <div class="group-name">${name}</div>
                `;
                
                container.appendChild(repDiv);
            });
        }

        function createGroupElements() {
            updateGroups(); // השתמש בפונקציה החדשה
        }

        function createRepresentativeElements() {
            updateRepresentatives(); // השתמש בפונקציה החדשה
        }

        // אתחול
        document.addEventListener('DOMContentLoaded', function() {
            updateMainProgress();
            createGroupElements();
            createRepresentativeElements();
        });
    </script>
</body>
</html>
