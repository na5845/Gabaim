<!DOCTYPE html>
<html dir="rtl" lang="he">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>מעקב גיוס כספים</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        /* צבעים חודשיים - כחול אפור */
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #4a5568 0%, #2d3748 50%, #4a5568 100%);
            color: white;
            padding: 20px;
            min-height: 100vh;
            transition: background 0.5s ease;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: rgba(45, 55, 72, 0.3);
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.4);
            transition: background 0.5s ease;
        }

        /* צבעים שנתיים - חום עמוק */
        body.annual-mode {
            background: linear-gradient(135deg, #3c2415 0%, #654321 50%, #3c2415 100%);
        }

        .annual-mode .container {
            background: rgba(101, 67, 33, 0.3);
        }

        .annual-mode .main-progress {
            background: #654321;
        }

        .annual-mode .group-progress {
            background: #654321;
        }

        .header {
            display: none;
        }

        .top-row {
            display: flex;
            justify-content: space-between;
            gap: 20px;
            margin-bottom: 20px;
        }

        .top-row .title-box {
            flex: 1;
            margin-left: 0;
        }

        .top-row .left-section {
            flex: 1;
        }

        .title-box {
            background: rgba(255, 255, 255, 0.08);
            border-radius: 15px;
            padding: 15px;
            border: 1px solid rgba(255, 215, 0, 0.3);
            text-align: center;
            flex: 1;
            width: 100%;
        }

        .title-content {
            display: flex;
            align-items: flex-start;
            justify-content: space-between;
            margin-bottom: 35px;
            padding-bottom: 0px;
            border-bottom: 1px solid rgba(255, 215, 0, 0.2);
        }

        .title-and-toggle {
            text-align: center;
            flex: 1;
        }

        .logo {
            width: 130px !important;
            height: 130px !important;
            object-fit: contain;
            border-radius: 8px;
        }

        .title-box .title {
            font-size: 1.8em;
            margin-top: 15px;
            margin-bottom: 25px;
            text-align: center;
            background: linear-gradient(45deg, #FFD700, #FFA500);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .content-row {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 50px;
        }

        .content-box {
            background: rgba(255, 255, 255, 0.08);
            border-radius: 15px;
            padding: 12px;
            border: 1px solid rgba(255, 215, 0, 0.3);
        }

        .left-section {
            flex: 0 0 auto;
            text-align: center;
        }

        .left-section .content-box {
            display: block;
            width: 100%;
        }

        .right-section {
            width: 400px;
            text-align: center;
        }

        .gabbaim-section {
            text-align: center;
            margin-top: 20px;
        }

        .gabbaim-section .content-box {
            display: inline-block;
            width: 100%;
            max-width: none;
        }

        .total-amount {
            font-size: 2.5em;
            font-weight: bold;
            color: #FFD700;
            margin-bottom: 10px;
        }

        .target-info {
            font-size: 1.2em;
            color: #ccc;
            margin-bottom: 20px;
        }

        .main-progress {
            background: #2d3748;
            border-radius: 25px;
            height: 50px;
            margin: 20px 0;
            overflow: hidden;
            position: relative;
            transition: background 0.5s ease;
        }

        .main-progress-bar {
            height: 100%;
            background: linear-gradient(90deg, #FFD700, #FFA500);
            border-radius: 25px;
            transition: width 3s ease-out;
            position: relative;
            width: 0%;
        }

        .main-progress-text {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-weight: bold;
            font-size: 1.1em;
            color: #000;
            z-index: 2;
        }

        .groups-container {
            display: flex;
            justify-content: center;
            gap: 8px;
            margin-top: 8px;
            align-items: flex-end;
            padding: 15px 0;
            flex-wrap: wrap;
        }

        .left-section .groups-container {
            justify-content: center;
        }

        .left-section .section-title {
            text-align: center;
        }

        .group-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            width: 60px;
        }

        #gabbaim-container {
            justify-content: center;
        }

        #gabbaim-container .group-item {
            width: 35px;
        }

        #gabbaim-container .group-progress {
            width: 28px;
        }

        #gabbaim-container .group-name {
            font-size: 0.6em;
            height: 35px;
        }

        .group-name {
            font-size: 0.8em;
            margin-top: 8px;
            font-weight: bold;
            color: #FFD700;
            text-align: center;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            line-height: 1.2;
        }

        .group-progress {
            background: #2d3748;
            border-radius: 10px;
            width: 45px;
            height: 250px;
            position: relative;
            overflow: hidden;
            transition: background 0.5s ease;
        }

        .group-progress-bar {
            position: absolute;
            bottom: 0;
            width: 100%;
            border-radius: 10px;
            transition: height 2s ease-out;
            height: 0%;
        }

        .group-progress-bar.normal {
            background: linear-gradient(0deg, #FFD700, #FFA500);
        }

        .group-progress-bar.exceeded {
            background: linear-gradient(0deg, #FFD700 0%, #FFA500 100%, #32CD32 100%);
        }

        .progress-exceeded {
            position: absolute;
            bottom: 0;
            width: 100%;
            background: linear-gradient(0deg, #32CD32, #00FF00);
            border-radius: 10px;
            transition: height 2s ease-out;
            height: 0%;
        }

        .group-percentage {
            position: absolute;
            bottom: 10px;
            left: 50%;
            transform: translateX(-50%);
            font-weight: bold;
            font-size: 0.9em;
            color: #000;
            z-index: 2;
            text-align: center;
            line-height: 1.1;
        }

        .group-amount {
            font-size: 0.8em;
            color: #ccc;
            margin-top: 5px;
            display: none;
        }

        .celebration {
            /* הסרתי את האנימציה */
        }

        .title {
            font-size: 2em;
            margin-bottom: 10px;
            text-align: center;
            background: linear-gradient(45deg, #FFD700, #FFA500);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .toggle-container {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            margin-bottom: 20px;
            padding-bottom: 15px;
        }

        .title-box .total-amount {
            margin-top: 20px;
        }

        .toggle-label {
            font-size: 1.2em;
            color: #FFD700;
            font-weight: bold;
        }

        .toggle-switch {
            position: relative;
            width: 120px;
            height: 40px;
            background: #2d3748;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid #FFD700;
        }

        .annual-mode .toggle-switch {
            background: #3c2415;
        }

        .toggle-slider {
            position: absolute;
            top: 1px;
            left: 1px;
            width: 55px;
            height: 34px;
            background: linear-gradient(45deg, #FFD700, #FFA500);
            border-radius: 17px;
            transition: transform 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8em;
            font-weight: bold;
            color: #2d3748;
        }

        .toggle-switch.annual .toggle-slider {
            transform: translateX(59px);
        }

        .toggle-text {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            font-size: 0.9em;
            font-weight: bold;
            color: #FFD700;
        }

        .toggle-text.left {
            left: 8px;
        }

        .toggle-text.right {
            right: 8px;
        }

        .toggle-switch.annual .toggle-text.left {
            color: rgba(255, 215, 0, 0.5);
        }

        .toggle-switch:not(.annual) .toggle-text.right {
            color: rgba(255, 215, 0, 0.5);
        }

        /* סגנון לתצוגת התאריך */
        .period-date {
            font-size: 1.1em;
            color: #FFD700;
            font-weight: bold;
            text-align: center;
            margin-bottom: 15px;
            margin-top: -10px;
        }

        .section-title {
            font-size: 1.5em;
            margin: 0 0 15px 0;
            text-align: center;
            color: #FFD700;
            font-weight: bold;
            padding-bottom: 10px;
            border-bottom: 1px solid rgba(255, 215, 0, 0.2);
        }

        /* Responsive design למכשירים צרים */
        @media (max-width: 768px) {
            .top-row {
                flex-direction: column;
                gap: 20px;
            }
            
            .top-row .title-box,
            .top-row .left-section {
                flex: none;
                width: 100%;
            }
            
            .logo {
                width: 100px !important;
                height: 100px !important;
            }
            
            .title-box .title {
                font-size: 1.5em;
            }
            
            .total-amount {
                font-size: 2em;
            }
            
            .groups-container {
                gap: 6px;
            }
            
            .group-item {
                width: 50px;
            }
            
            .group-progress {
                width: 40px;
                height: 200px;
            }
            
            #gabbaim-container .group-item {
                width: 30px;
            }
            
            #gabbaim-container .group-progress {
                width: 25px;
                height: 200px;
            }

            .period-date {
                font-size: 1em;
            }
        }

        /* Responsive design למסכים גדולים - רק במסך מלא */
        @media (min-width: 1920px) and (min-height: 1080px) {
            .container {
                max-width: 1600px;
                padding: 40px;
            }
            
            .logo {
                width: 160px !important;
                height: 160px !important;
            }
            
            .title-box .title {
                font-size: 2.2em;
            }
            
            .total-amount {
                font-size: 3em;
            }
            
            .target-info {
                font-size: 1.4em;
            }
            
            .main-progress {
                height: 60px;
            }
            
            .main-progress-text {
                font-size: 1.3em;
            }
            
            .section-title {
                font-size: 1.8em;
            }
            
            .groups-container {
                gap: 12px;
                padding: 20px 0;
            }
            
            .group-item {
                width: 80px;
            }
            
            .group-progress {
                width: 60px;
                height: 300px;
            }
            
            .group-name {
                font-size: 1em;
                height: 50px;
            }
            
            .group-percentage {
                font-size: 1.1em;
            }
            
            #gabbaim-container .group-item {
                width: 45px;
            }
            
            #gabbaim-container .group-progress {
                width: 35px;
                height: 300px;
            }
            
            #gabbaim-container .group-name {
                font-size: 0.8em;
                height: 40px;
            }
            
            .toggle-switch {
                width: 140px;
                height: 45px;
            }
            
            .toggle-slider {
                width: 65px;
                height: 39px;
                border-radius: 20px;
            }
            
            .toggle-switch.annual .toggle-slider {
                transform: translateX(69px);
            }

            .period-date {
                font-size: 1.3em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="top-row">
            <div class="title-box">
                <div class="title-content">
                    <img src="https://raw.githubusercontent.com/na5845/E/main/logo.png" alt="לוגו" class="logo">
                    <div class="title-and-toggle">
                        <h1 class="title">מעקב גיוס כספים</h1>
                        <div class="period-date" id="periodDate">חודש אייר תשפ״ה</div>
                        <div class="toggle-container" style="border-bottom: none !important; padding-bottom: 0 !important;">
                            <div class="toggle-switch" id="periodToggle" onclick="togglePeriod()">
                                <div class="toggle-text left">חודשי</div>
                                <div class="toggle-text right">שנתי</div>
                                <div class="toggle-slider" id="toggleSlider">חודשי</div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="total-amount" id="totalAmount">7175 ש"ח</div>
                <div class="target-info">מתוך יעד של 8000 ש"ח</div>
                
                <div class="main-progress">
                    <div class="main-progress-bar" id="mainProgressBar">
                        <div class="main-progress-text" id="mainProgressText">0%</div>
                    </div>
                </div>
            </div>

            <div class="left-section">
                <div class="content-box">
                    <div class="section-title">לפי שטיבלעך</div>
                    <div class="groups-container" id="shtiblech-container">
                        <!-- הקבוצות יתווספו כאן באמצעות JavaScript -->
                    </div>
                </div>
            </div>
        </div>

        <div class="gabbaim-section">
            <div class="content-box">
                <div class="section-title">לפי גבאים</div>
                <div class="groups-container" id="gabbaim-container">
                    <!-- הנציגים יתווספו כאן באמצעות JavaScript -->
                </div>
            </div>
        </div>
    </div>

    <script>
        // נתונים חודשיים
        const monthlyData = {
            totalTarget: 8000,
            groupTarget: 2000,
            totalRaised: 14350,
            groupAmounts: [478, 550, 945, 1225, 1877, 2100],
            representativeAmounts: [21, 89, 99, 207, 211, 250, 259, 280, 321, 326, 350, 350, 350, 350, 350, 412, 425, 450, 458, 478, 550, 589],
            repTarget: 500
        };

        // נתונים שנתיים
        const annualData = {
            totalTarget: 96000,
            groupTarget: 12000,
            totalRaised: 14350,
            groupAmounts: [956, 1100, 1890, 2450, 3754, 4200],
            representativeAmounts: [42, 178, 198, 414, 422, 500, 518, 560, 642, 652, 700, 700, 700, 700, 700, 824, 850, 900, 916, 956, 1100, 1178],
            repTarget: 3000
        };

        // שמות שטיבלעך - חודשי
        const monthlyGroupNames = [
            'רמת אלחנן', 
            'שיכון ה\'', 
            'בן יעקב', 
            'זכרון רפאל', 
            'בעלזא 5', 
            'בית פנחס'
        ];

        // שמות שטיבלעך - שנתי
        const annualGroupNames = [
            'רמת אלחנן', 
            'שיכון ה\'', 
            'בן יעקב', 
            'זכרון רפאל', 
            'בעלזא 5', 
            'בית פנחס'
        ];

        // שמות נציגים - חודשי
        const monthlyRepresentatives = [
            'הרב ישראל פרידמן', 'הרב שמעון יחזקאל ווייס', 'הרב צבי יוסף לנדאו', 'הרב יעקב פרישמן', 'הרב הלל רויטמן', 'הרב פנחס מנדל', 'הרב יוסף שוורץ', 'הרב זיכרמן יוסף אריה', 'הרב ישראל יצחק פלדמן', 'הרב משה הורביץ', 'הרב שמואל יעקב פירר', 'הרב מתתיהו קרייזמן', 'הרב חיים פרידמן', 'הרב חיים נח אלבום', 'הרב אברהם כהנא', 'הרב צימרמן חיים שלום', 'הרב דוד מנדל', 'הרב חיים צבי גלנדאור', 'הרב מיכאל שמוטץ', 'הרב שלום פנט', 'הרב שלמה מאיר קליין', 'הרב בן ציון לוי'
        ];

        // שמות נציגים - שנתי
        const annualRepresentatives = [
            'הרב ישראל פרידמן', 'הרב שמעון יחזקאל ווייס', 'הרב צבי יוסף לנדאו', 'הרב יעקב פרישמן', 'הרב הלל רויטמן', 'הרב פנחס מנדל', 'הרב יוסף שוורץ', 'הרב זיכרמן יוסף אריה', 'הרב ישראל יצחק פלדמן', 'הרב משה הורביץ', 'הרב שמואל יעקב פירר', 'הרב מתתיהו קרייזמן', 'הרב חיים פרידמן', 'הרב חיים נח אלבום', 'הרב אברהם כהנא', 'הרב צימרמן חיים שלום', 'הרב דוד מנדל', 'הרב חיים צבי גלנדאור', 'הרב מיכאל שמוטץ', 'הרב שלום פנט', 'הרב שלמה מאיר קליין', 'הרב בן ציון לוי'
        ];

        let isAnnual = false;

        // פונקציה לאנימציה של מספרים
        function animateNumber(element, target, duration, isAmount = false) {
            let start = 0;
            const startTime = performance.now();
            
            function updateNumber(currentTime) {
                const elapsed = currentTime - startTime;
                const progress = Math.min(elapsed / duration, 1);
                
                const current = Math.round(start + (target - start) * progress);
                if (isAmount) {
                    element.textContent = current.toLocaleString() + ' ₪';
                } else {
                    element.textContent = current + '%';
                }
                
                if (progress < 1) {
                    requestAnimationFrame(updateNumber);
                }
            }
            
            requestAnimationFrame(updateNumber);
        }

        function togglePeriod() {
            const toggle = document.getElementById('periodToggle');
            const slider = document.getElementById('toggleSlider');
            const body = document.body;
            const periodDate = document.getElementById('periodDate');
            
            isAnnual = !isAnnual;
            
            if (isAnnual) {
                toggle.classList.add('annual');
                slider.textContent = 'שנתי';
                body.classList.add('annual-mode');
                periodDate.textContent = 'שנת תשפ״ה';
            } else {
                toggle.classList.remove('annual');
                slider.textContent = 'חודשי';
                body.classList.remove('annual-mode');
                periodDate.textContent = 'חודש אייר תשפ״ה';
            }
            
            // עדכן את כל הנתונים עם אנימציות
            updateMainProgress();
            updateGroups();
            updateRepresentatives();
        }

        function getCurrentData() {
            return isAnnual ? annualData : monthlyData;
        }

        function getCurrentGroupNames() {
            return isAnnual ? annualGroupNames : monthlyGroupNames;
        }

        function getCurrentRepresentatives() {
            return isAnnual ? annualRepresentatives : monthlyRepresentatives;
        }

        function updateMainProgress() {
            const data = getCurrentData();
            const percentage = Math.round((data.totalRaised / data.totalTarget) * 100);
            const progressBar = document.getElementById('mainProgressBar');
            const progressText = document.getElementById('mainProgressText');
            const totalAmount = document.getElementById('totalAmount');
            const targetInfo = document.querySelector('.target-info');
            
            // איפוס לאנימציה
            progressBar.style.width = '0%';
            progressText.textContent = '0%';
            
            // עדכון טקסטים
            totalAmount.textContent = `${data.totalRaised.toLocaleString()} ש"ח`;
            targetInfo.textContent = `מתוך יעד של ${data.totalTarget.toLocaleString()} ש"ח`;
            
            // אנימציה של הבר הראשי
            setTimeout(() => {
                progressBar.style.width = `${Math.min(percentage, 100)}%`;
                animateNumber(progressText, percentage, 3000);
            }, 500);
        }

        function updateGroups() {
            const container = document.getElementById('shtiblech-container');
            const data = getCurrentData();
            const groupNames = getCurrentGroupNames();
            
            // נקה את התוכן הקיים
            container.innerHTML = '';
            
            groupNames.forEach((name, index) => {
                const amount = data.groupAmounts[index];
                const percentage = Math.round((amount / data.groupTarget) * 100);
                
                const groupDiv = document.createElement('div');
                groupDiv.className = 'group-item';
                
                let progressHTML = '';
                if (percentage > 100) {
                    progressHTML = `
                        <div class="group-progress-bar normal" style="height: 0%"></div>
                        <div class="progress-exceeded" style="height: 0%"></div>
                    `;
                } else {
                    progressHTML = `<div class="group-progress-bar normal" style="height: 0%"></div>`;
                }
                
                groupDiv.innerHTML = `
                    <div class="group-progress">
                        ${progressHTML}
                        <div class="group-percentage" style="transform: translate(-50%, -50%) rotate(-90deg); white-space: nowrap;">0 ₪</div>
                    </div>
                    <div class="group-name">${name}</div>
                `;
                
                container.appendChild(groupDiv);
                
                // אנימציה מושהית
                setTimeout(() => {
                    const progressBar = groupDiv.querySelector('.group-progress-bar');
                    const exceededBar = groupDiv.querySelector('.progress-exceeded');
                    const percentageElement = groupDiv.querySelector('.group-percentage');
                    
                    if (percentage > 100) {
                        progressBar.style.height = '100%';
                        const exceededPercentage = percentage - 100;
                        const exceededHeight = Math.min(exceededPercentage, 100);
                        if (exceededBar) {
                            exceededBar.style.height = exceededHeight + '%';
                        }
                    } else {
                        progressBar.style.height = percentage + '%';
                    }
                    
                    animateNumber(percentageElement, amount, 2000, true);
                }, 1000 + (index * 150));
            });
        }

        function updateRepresentatives() {
            const container = document.getElementById('gabbaim-container');
            const data = getCurrentData();
            const representatives = getCurrentRepresentatives();
            
            // נקה את התוכן הקיים
            container.innerHTML = '';
            
            representatives.forEach((name, index) => {
                const amount = data.representativeAmounts[index];
                const percentage = Math.round((amount / data.repTarget) * 100);
                
                const repDiv = document.createElement('div');
                repDiv.className = 'group-item';
                
                let progressHTML = '';
                if (percentage > 100) {
                    progressHTML = `
                        <div class="group-progress-bar normal" style="height: 0%"></div>
                        <div class="progress-exceeded" style="height: 0%"></div>
                    `;
                } else {
                    progressHTML = `<div class="group-progress-bar normal" style="height: 0%"></div>`;
                }
                
                repDiv.innerHTML = `
                    <div class="group-progress">
                        ${progressHTML}
                        <div class="group-percentage" style="transform: translate(-50%, -50%) rotate(-90deg); font-size: 1em; white-space: nowrap;">0 ₪</div>
                    </div>
                    <div class="group-name">${name}</div>
                `;
                
                container.appendChild(repDiv);
                
                // אנימציה מושהית
                setTimeout(() => {
                    const progressBar = repDiv.querySelector('.group-progress-bar');
                    const exceededBar = repDiv.querySelector('.progress-exceeded');
                    const percentageElement = repDiv.querySelector('.group-percentage');
                    
                    if (percentage > 100) {
                        progressBar.style.height = '100%';
                        const exceededPercentage = percentage - 100;
                        const exceededHeight = Math.min(exceededPercentage, 100);
                        if (exceededBar) {
                            exceededBar.style.height = exceededHeight + '%';
                        }
                    } else {
                        progressBar.style.height = percentage + '%';
                    }
                    
                    animateNumber(percentageElement, amount, 2000, true);
                }, 1000 + (index * 100));
            });
        }

        // אתחול
        document.addEventListener('DOMContentLoaded', function() {
            updateMainProgress();
            updateGroups();
            updateRepresentatives();
        });
    </script>
</body>
</html>